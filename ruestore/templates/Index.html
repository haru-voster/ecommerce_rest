<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Products</title>
<style>
    body { font-family: Arial, sans-serif; margin:0; padding:10px; background:#f5f5f5; }
    h2 { text-align:center; margin-top:20px; }
    #productContainer { display:flex; flex-wrap:wrap; gap:15px; justify-content:center; padding:20px; }
    .product-card { background:#fff; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.15); padding:15px; width:200px; text-align:center; transition: transform 0.2s; }
    .product-card:hover { transform:scale(1.03); }
    .product-card img { width:100%; height:150px; object-fit:cover; border-radius:4px; }
    .product-card button { margin-top:10px; padding:8px 12px; border:none; border-radius:4px; background-color:#2c3e50; color:white; cursor:pointer; }
    .product-card button:hover { background-color:#34495e; }
</style>
</head>
<body>

<h2>Welcome to RUESTORE</h2>
<p style="text-align:center;">Browse our wide selection of computers, laptops, phones, cameras, and accessories below.</p>

<!-- Product Section (empty at first, populated after fetch) -->
<div id="productContainer">
    <!-- Products will appear here -->
</div>

<script>
const container = document.getElementById("productContainer");

// Immediately show "loading" so layout is visible
container.innerHTML = `<p style="width:100%; text-align:center;">Loading products...</p>`;

// Fetch products asynchronously
fetch("http://127.0.0.1:8000/api/products/")
.then(res => res.json())
.then(data => {
    if(data.length === 0) {
        container.innerHTML = `<p style="width:100%; text-align:center;">No products available.</p>`;
        return;
    }

    let html = '';
    data.forEach(p => {
        html += `
        <div class="product-card">
            <img src="${p.image || 'https://via.placeholder.com/200'}" alt="${p.name}">
            <h3>${p.name}</h3>
            <p>Ksh ${p.price}</p>
            <p>RAM: ${p.ram || 'N/A'} | CPU: ${p.processor || 'N/A'} | Storage: ${p.storage || 'N/A'}</p>
            <button onclick="alert('Viewing ${p.name}\\nCPU: ${p.processor}\\nRAM: ${p.ram}\\nStorage: ${p.storage}')">View</button>
        </div>
        `;
    });

    container.innerHTML = html; // replace "loading" with products
})
.catch(err => {
    container.innerHTML = `<p style="color:red; width:100%; text-align:center;">Failed to load products. Please try again.</p>`;
    console.error(err);
});
</script>
</body>
</html>
